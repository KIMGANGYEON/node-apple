<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/main.css">
    <title>Document</title>
</head>
<body>
    


    <body class="grey-bg">
        <!-- <%= JSON.stringify(posts) %> -->
        <%- include('nav.ejs') %>

      <input class="search">
      <button class="search-send">ê²€ìƒ‰</button>

      <script>

        document.querySelector('.search-send').addEventListener('click', function(){
          let enter = document.querySelector('.search').value
          location.href = '/search?val=' + enter
        })

      </script>

        <div class="white-bg">
          <% for (let i = 0; i < posts.length; i++){ %>
          <div class="list-box">
            <h4>
              <a href="/detail/<%= posts[i]._id %>"><%= posts[i].title %></a>
              <a href="/edit/<%= posts[i]._id %>">âœï¸</a>
              <span class="delete" data-id="<%= posts[i]._id %>">ğŸ—‘ï¸</span>
            </h4>
            <p>ê¸€ë‚´ìš©ì„</p>
          </div>
        <% } %>
        </div> 

        <a href="/list/next/<%= posts[posts.length-1]._id %>">next</a>

        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script> 
        <script>
          
          for (let i = 0; i <'<%= posts.length %>'; i++){
            
            
            document.querySelectorAll('.delete')[i].addEventListener('click', function(e){
              e.target.dataset.id
              fetch('/delete?docid=' + e.target.dataset.id, {
                method : 'DELETE',
              })
              .then((r)=>r.text())
              .then((r)=>{
                e.target.parentElement.parentElement.style.display = 'none'
              })
            })
            // method : 'POST',
            // headers : {
              //   'Content-Type' : 'application/json'
              // },
              // body : JSON.stringify({a : 1})
              
            }
            
            
            // axios.get.get('/URL').then((r)=>{console.log(r)
            
            // }).catch(()=>{
  
            // })
            
//           fetch('/URL')
// .then((r)=>{
//   if(r.status == 200) {
//     return r.json()
//   } else {
//     //ì„œë²„ê°€ ì—ëŸ¬ì½”ë“œì „ì†¡ì‹œ ì‹¤í–‰í• ì½”ë“œ
//   }
// })
// .then((result)=>{ 
//   //ì„±ê³µì‹œ ì‹¤í–‰í• ì½”ë“œ
// }).catch((error)=>{
//   //ì¸í„°ë„·ë¬¸ì œ ë“±ìœ¼ë¡œ ì‹¤íŒ¨ì‹œ ì‹¤í–‰í• ì½”ë“œ
//   console.log(error)
// })


        </script>
      


      
      </body>

</body>
</html>